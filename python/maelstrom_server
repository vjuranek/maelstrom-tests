#!/usr/bin/env python

import asyncio
import argparse

from server import EchoServer, BroadcastServer, GSetServer

parser = argparse.ArgumentParser(description="Maelstrom test server")
parser.add_argument("-w", "--workload", choices=["echo", "broadcast", "g-set"])
args = parser.parse_args()

server = None
if args.workload == "echo":
    server = EchoServer()
if args.workload == "broadcast":
    server = BroadcastServer()
if args.workload == "g-set":
    server = GSetServer()

asyncio.run(server.run())
